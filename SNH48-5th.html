<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNH48 GROUP 第五届偶像年度人气总决选</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.hcharts.cn/highcharts/highcharts.js"></script>
    <style type="text/css">
        .row {
            margin-top: 1.6em;
        }

        #team-color {
            margin-top: 0;
        }

            #team-color .teamName, #team-index .teamName {
                width: calc(100% / 18);
                float: left;
                white-space: pre-line;
            }

        .table tr td, .table tr th {
            font-weight: bolder;
        }

            .table tr td:nth-child(1) {
                text-align: center;
                width: 45px;
                vertical-align: middle;
            }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row" id="team-color"></div>
        <div class="row">
            <div class="col-xs-6">
                <table id="vote-table-1" class="table table-bordered">
                    <tr>
                        <th></th>
                        <th>所属队伍</th>
                        <th>原队伍</th>
                        <th>成员姓名</th>
                        <th>得票数</th>
                    </tr>
                </table>
            </div>
            <div class="col-xs-6">
                <table id="vote-table-2" class="table table-bordered">
                    <tr>
                        <th></th>
                        <th>所属队伍</th>
                        <th>原队伍</th>
                        <th>成员姓名</th>
                        <th>得票数</th>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <div id="chart-all-percenter"></div>
            </div>
            <div class="col-xs-6">
                <div id="chart-origin-percenter"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div id="chart-all-in"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <div id="chart-top16-123"></div>
            </div>
            <div class="col-xs-6">
                <div id="chart-top16-increase"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <div id="chart-top16-rank"></div>
            </div>
            <div class="col-xs-6">
                <div id="chart-history"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-1 text-right">
                传送门：
            </div>
            <div class="col-xs-11">
                <a href="https://weeeek.github.io/SNH48/SNH48-4th.html" target="_blank">SNH48 GROUP 第四届偶像年度人气总决选排名统计</a>
                <br>
                <a href="https://weeeek.github.io/SNH48/SNH48-Best50-4.html" target="_blank">SNH48 GROUP 第四届SNH48 Group 金曲大赏排名统计</a>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="SNH48GroupMemebers.js"></script>
    <script type="text/javascript">
        var outRank = 67;
        var memberResponse = { total: 303, rows: [] }
        //总票数
        var sumvote = 0.0;

        function getTeamColorByTeamId(teamId) {
            let group = groups.find((g) => g.id == (teamId.substring(0, 1) + "0"));
            return group.teams.find((t) => t.id == teamId).color;
        }
    </script>
    <script type="text/javascript">
        //不统计非Top16 五选速报中报票数
        var finalData = [
            {
                name: "胡丽芝",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 66, s: 0, z: 0, vote: 11008.38 }
            },
            {
                name: "闫明筠",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 65, s: 0, z: 0, vote: 11145.12 }
            },
            {
                name: "祁静",
                team: "104",
                original: "104",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 64, s: 0, z: 0, vote: 12162.42 }
            },
            {
                name: "袁雨桢",
                team: "101",
                original: "101",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 64, vote: 15786.2 },
                _5th: { rank: 63, s: 0, z: 7184.26, vote: 13314.54 }
            },
            {
                name: "蒋芸",
                team: "101",
                original: "101",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 44, vote: 19942.4 },
                _5th: { rank: 62, s: 0, z: 7239.38, vote: 13557.16 }
            },
            {
                name: "张琼予",
                team: "301",
                original: "301",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 61, s: 0, z: 0, vote: 13816.08 }
            },
            {
                name: "葛司琪",
                team: "203",
                original: "203",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 60, s: 0, z: 0, vote: 14013.38 }
            },
            {
                name: "刘姝贤",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 35, vote: 22204.6 },
                _5th: { rank: 59, s: 0, z: 0, vote: 14146.32 }
            },
            {
                name: "高源婧",
                team: "301",
                original: "301",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 58, s: 0, z: 0, vote: 14170.32 }
            },
            {
                name: "李梓",
                team: "202",
                original: "202",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 27, vote: 17821.8 },
                _4th: { rank: 46, vote: 19382.1 },
                _5th: { rank: 57, s: 0, z: 0, vote: 14291.44 }
            },
            {
                name: "孙珍妮",
                team: "103",
                original: "103",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 22, vote: 28614.6 },
                _5th: { rank: 56, s: 0, z: 0, vote: 14840.56 }
            },
            {
                name: "刘倩倩",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 55, s: 0, z: 0, vote: 14953.0 }
            },
            {
                name: "谢妮",
                team: "102",
                original: "103",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 60, vote: 16652.2 },
                _5th: { rank: 54, s: 0, z: 8112.66, vote: 15041.66 }
            },
            {
                name: "王雨煊",
                team: "203",
                original: "203",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 53, s: 0, z: 0, vote: 15085.60 }
            },
            {
                name: "许杨玉琢",
                team: "103",
                original: "103",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 27, vote: 27195 },
                _5th: { rank: 52, s: 0, z: 8777.80, vote: 15330.34 }
            },
            {
                name: "卢静",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 51, s: 0, z: 0, vote: 15398.2 }
            },
            {
                name: "肖文铃",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 50, s: 0, z: 0, vote: 15440.72 }
            },
            {
                name: "沈梦瑶",
                team: "103",
                original: "103",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 65, vote: 15503.3 },
                _5th: { rank: 49, s: 0, z: 7345.56, vote: 16236.28 }
            },
            {
                name: "王诗蒙",
                team: "401",
                original: "401",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 48, s: 0, z: 0, vote: 16536.74 }
            },
            {
                name: "青钰雯",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 47, s: 0, z: 0, vote: 16661.78 }
            },
            {
                name: "赵佳蕊",
                team: "401",
                original: "401",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 46, s: 0, z: 0, vote: 16916.0 }
            },
            {
                name: "徐诗琪",
                team: "104",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 45, s: 0, z: 7861.46, vote: 17005.54 }
            },
            {
                name: "洪珮雲",
                team: "103",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 49, vote: 18878.7 },
                _5th: { rank: 44, s: 0, z: 0, vote: 17128.92 }
            },
            {
                name: "陈美君",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 43, s: 0, z: 0, vote: 17566.12 }
            },
            {
                name: "左婧媛",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 42, s: 0, z: 0, vote: 18471.98 }
            },
            {
                name: "李钊",
                team: "104",
                original: "104",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 38, vote: 21283 },
                _5th: { rank: 41, s: 2810.08, z: 11961.76, vote: 19207.06 }
            },
            {
                name: "李宇琪",
                team: "101",
                original: "101",
                _1st: { rank: 11, vote: 6027 },
                _2nd: { rank: 6, vote: 31215.9 },
                _3rd: { rank: 20, vote: 21894.8 },
                _4th: { rank: 16, vote: 40469.5 },
                _5th: { rank: 40, s: 0, z: 12360.96, vote: 20228.46 }
            },
            {
                name: "胡晓慧",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 34, vote: 23292.7 },
                _5th: { rank: 39, s: 0, z: 12497.72, vote: 20498.88 }
            },
            {
                name: "黄恩茹",
                team: "203",
                original: "203",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 38, s: 0, z: 0, vote: 20970.48 }
            },
            {
                name: "陈倩楠",
                team: "202",
                original: "202",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 37, s: 0, z: 0, vote: 21830.38 }
            },
            {
                name: "唐莉佳",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 50, vote: 18351.3 },
                _5th: { rank: 36, s: 0, z: 10896.66, vote: 23293.72 }
            },
            {
                name: "马玉灵",
                team: "202",
                original: "202",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 35, s: 5947.08, z: 12025.56, vote: 23495.14 }
            },
            {
                name: "陈珂",
                team: "301",
                original: "301",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 58, vote: 17068.1 },
                _5th: { rank: 34, s: 0, z: 11923.56, vote: 23742.88 }
            },
            {
                name: "张怀瑾",
                team: "203",
                original: "203",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 33, s: 0, z: 0, vote: 26994.08 }
            },
            {
                name: "费沁源",
                team: "103",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 40, vote: 20614.0 },
                _5th: { rank: 32, s: 0, z: 11867.08, vote: 27355.24 }
            },
            {
                name: "张怡",
                team: "102",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 31, vote: 24303.8 },
                _5th: { rank: 31, s: 0, z: 14673.92, vote: 27404.24 }
            },
            {
                name: "刘增艳",
                team: "101",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 63, vote: 15879.0 },
                _5th: { rank: 30, s: 4236.24, z: 17593.98, vote: 28561.76 }
            },
            {
                name: "冯思佳",
                team: "202",
                original: "202",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: null, vote: 0 },
                _5th: { rank: 29, s: 0, z: 14243.92, vote: 28616.9 }
            },
            {
                name: "姜杉",
                team: "103",
                original: "105",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 19, vote: 33332.2 },
                _5th: { rank: 28, s: 0, z: 13328.66, vote: 29806.26 }
            },
            {
                name: "张雨鑫",
                team: "102",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 20, vote: 32986.2 },
                _5th: { rank: 27, s: 0, z: 15271.90, vote: 31594.78 }
            },
            {
                name: "万丽娜",
                team: "103",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 17, vote: 39758.9 },
                _5th: { rank: 26, s: 0, z: 19314.32, vote: 31610.8 }
            },
            {
                name: "易嘉爱",
                team: "102",
                original: "102",
                _1st: { rank: 14, vote: 5653 },
                _2nd: { rank: 8, vote: 30004.8 },
                _3rd: { rank: 26, vote: 18046.0 },
                _4th: { rank: 39, vote: 21002.6 },
                _5th: { rank: 25, s: 0, z: 17380.12, vote: 31666.04 }
            },
            {
                name: "韩家乐",
                team: "401",
                original: "401",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 37, vote: 21602.8 },
                _5th: { rank: 24, s: 14273.94, z: 25290.86, vote: 34627.68 }
            },
            {
                name: "杨冰怡",
                team: "104",
                original: "104",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 39, vote: 13590.9 },
                _4th: { rank: 25, vote: 27534.7 },
                _5th: { rank: 23, s: 14768.28, z: 21454.66, vote: 35141.76 }
            },
            {
                name: "徐子轩",
                team: "101",
                original: "101",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 42, vote: 20222.4 },
                _5th: { rank: 22, s: 0, z: 21737.04, vote: 35187.08 }
            },
            {
                name: "刘力菲",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 23, vote: 28168.8 },
                _5th: { rank: 21, s: 8843.24, z: 19048.10, vote: 35577.08 }
            },
            {
                name: "张丹三",
                team: "104",
                original: "104",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 16, vote: 28185.4 },
                _4th: { rank: 53, vote: 17931.6 },
                _5th: { rank: 20, s: 5106.54, z: 17038.50, vote: 37827.82 }
            },
            {
                name: "宋昕冉",
                team: "104",
                original: "104",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 29, vote: 25366.6 },
                _5th: { rank: 19, s: 0, z: 25931.5, vote: 38662.76 }
            },
            {
                name: "郑丹妮",
                team: "302",
                original: "302",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 45, vote: 19770.7 },
                _5th: { rank: 18, s: 14273.94, z: 24889.92, vote: 42798.84 }
            },
            {
                name: "孙芮",
                team: "101",
                original: "101",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 18, vote: 35453.6 },
                _5th: { rank: 17, s: 14768.28, z: 25679.72, vote: 47733.14 }
            },
            {
                name: "张语格",
                team: "101",
                original: "101",
                _1st: { rank: 5, vote: 9061 },
                _2nd: { rank: 5, vote: 32306.0 },
                _3rd: { rank: 8, vote: 66867.5 },
                _4th: { rank: 9, vote: 78345.6 },
                _5th: { rank: 16, s: 4257.54, z: 30200.68, vote: 52339.94 }
            },
            {
                name: "段艺璇",
                team: "201",
                original: "201",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 43, vote: 12477.2 },
                _4th: { rank: 13, vote: 46825.4 },
                _5th: { rank: 15, s: 2021.50, z: 25783.36, vote: 53190.64 }
            },
            {
                name: "苏杉杉",
                team: "202",
                original: "202",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: null, vote: 0 },
                _4th: { rank: 21, vote: 32151.0 },
                _5th: { rank: 14, s: 0, z: 31231.78, vote: 54696.94 }
            },
            {
                name: "孔肖吟",
                team: "101",
                original: "101",
                _1st: { rank: 15, vote: 5413 },
                _2nd: { rank: 16, vote: 17658.9 },
                _3rd: { rank: 25, vote: 18989.1 },
                _4th: { rank: 12, vote: 49093.8 },
                _5th: { rank: 13, s: 0, z: 24467.14, vote: 56029.9 }
            },
            {
                name: "吴哲晗",
                team: "101",
                original: "101",
                _1st: { rank: 1, vote: 19281 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 23, vote: 19588.7 },
                _4th: { rank: 15, vote: 41674.9 },
                _5th: { rank: 12, s: 0, z: 34042.38, vote: 59537.14 }
            },
            {
                name: "谢蕾蕾",
                team: "301",
                original: "301",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: null, vote: 0 },
                _3rd: { rank: 40, vote: 13550 },
                _4th: { rank: 32, vote: 23927.8 },
                _5th: { rank: 11, s: 13445.46, z: 36850.08, vote: 61115.92 }
            },
            {
                name: "林思意",
                team: "103",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 17, vote: 16050.5 },
                _3rd: { rank: 13, vote: 38786.4 },
                _4th: { rank: 14, vote: 45981.6 },
                _5th: { rank: 10, s: 0, z: 25097.76, vote: 65464.62 }
            },
            {
                name: "钱蓓婷",
                team: "101",
                original: "101",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 26, vote: 9407.5 },
                _3rd: { rank: 28, vote: 17694 },
                _4th: { rank: 26, vote: 27301.4 },
                _5th: { rank: 9, s: 0, z: 23941.96, vote: 69039.06 }
            },
            {
                name: "戴萌",
                team: "101",
                original: "101",
                _1st: { rank: 13, vote: 5785 },
                _2nd: { rank: 15, vote: 17907.3 },
                _3rd: { rank: 12, vote: 41511.8 },
                _4th: { rank: 11, vote: 53569.1 },
                _5th: { rank: 8, s: 0, z: 34208.94, vote: 75186.42 }
            },
            {
                name: "许佳琪",
                team: "101",
                original: "101",
                _1st: { rank: 8, vote: 7256 },
                _2nd: { rank: 20, vote: 14351.7 },
                _3rd: { rank: 11, vote: 41740.5 },
                _4th: { rank: 10, vote: 54768.8 },
                _5th: { rank: 7, s: 0, z: 43693.40, vote: 91582.06 }
            },
            {
                name: "赵粤",
                team: "102",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 11, vote: 25245.0 },
                _3rd: { rank: 9, vote: 47563.5 },
                _4th: { rank: 7, vote: 90929.7 },
                _5th: { rank: 6, s: 0, z: 48801.36, vote: 100522.08 }
            },
            {
                name: "莫寒",
                team: "101",
                original: "101",
                _1st: { rank: 7, vote: 7331 },
                _2nd: { rank: 13, vote: 20201.7 },
                _3rd: { rank: 6, vote: 73362.6 },
                _4th: { rank: 8, vote: 88034.2 },
                _5th: { rank: 5, s: 0, z: 50341.30, vote: 116283.52 }
            },
            {
                name: "陆婷",
                team: "102",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 10, vote: 25669.2 },
                _3rd: { rank: 7, vote: 71639.6 },
                _4th: { rank: 5, vote: 126639.2 },
                _5th: { rank: 4, s: 0, z: 46939.76, vote: 145963.66 }
            },
            {
                name: "冯薪朵",
                team: "102",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 12, vote: 22028.7 },
                _3rd: { rank: 5, vote: 88598.8 },
                _4th: { rank: 4, vote: 133607.1 },
                _5th: { rank: 3, s: 0, z: 77395.02, vote: 174020.18 }
            },
            {
                name: "黄婷婷",
                team: "102",
                original: "102",
                _1st: { rank: null, vote: 0 },
                _2nd: { rank: 4, vote: 35189.0 },
                _3rd: { rank: 3, vote: 130258.3 },
                _4th: { rank: 3, vote: 165193.8 },
                _5th: { rank: 2, s: 2097.52, z: 217301.08, vote: 276897.2 }
            },
            {
                name: "李艺彤",
                team: "103",
                original: "102",
                _1st: { rank: 6, vote: 9037 },
                _2nd: { rank: 3, vote: 47134.5 },
                _3rd: { rank: 2, vote: 169971.4 },
                _4th: { rank: 2, vote: 259478.6 },
                _5th: { rank: 1, s: 19769.60, z: 284783.92, vote: 402040.4 }
            },
        ];
        //各队颜色，饼图用
        var colors = [], colors2 = [];
        var XII_data;
        //各队票数比例
        var series_all_percenter = [];
        var series_origin_percenter = [];
        //圈内各组人数,1-16,17-32,33-48,49-66
        var series_all_in = [];
        //top16排名变化
        var series_top16_rank = [];
        //top16名字
        var categories_top16 = [];
        //top16票数增长数据
        var series_top16_123 = [{ name: '终报增长', data: [] }, { name: '中报增长', data: [] }, { name: '速报增长', data: [] }];

        "#94D401", "#EF1B52"

        var series_top16_increase = [{
            name: '第四届票数',
            dashStyle: "solid",
            borderColor: "red",
            color: 'rgba(239,27,82,1)',
            data: [],
            pointPadding: 0.3
        }, {
            name: '第五届票数',
            color: 'rgba(148,212,1,.8)',
            data: [],
            dashStyle: "solid",
        }];

        function addVote(targetTeam, originalTeam, vote, rank) {
            let gid = targetTeam.id.substring(0, 1) + "0";
            let group = groups.find((g) => g.id == gid);
            ++group._in;
            group.vote = (group.vote * 100 + vote * 100) / 100;
            targetTeam.vote = (targetTeam.vote * 100 + vote * 100) / 100;
            //原归属队伍总票数相加
            originalTeam.originVote = (originalTeam.originVote * 100 + vote * 100) / 100;

            ++targetTeam._in.sum;
            if (rank > 48 && rank <= 66)
                ++targetTeam._in.t66;
            if (rank > 32 && rank <= 48)
                ++targetTeam._in.t48;
            if (rank > 16 && rank <= 32)
                ++targetTeam._in.t32;
            if (rank <= 16)
                ++targetTeam._in.t16;

            sumvote = (sumvote * 100 + vote * 100) / 100;
        }

        function main() {
            //成员归属队伍
            //$.each(memberResponse.rows, function (i, item) {
            //    //if (item.tid == "150")
            //    //    item.tid = "101";
            //    let teams = groups.find((g) => g.id == item.gid).teams;

            //    teams.find((t) => t.id == item.tid).members.push({
            //        sid: item.sid,
            //        name: item.sname,
            //    })
            //})
            //console.log(JSON.stringify(groups));
            //最上面的各队颜色
            $(groups).each(function (i, g) {
                $(g.teams).each(function (index, item) {
                    item.enabled = item.members.length > 0;
                    if (item.enabled)
                        $("#team-color").append('<div class="teamName text-center" style="color:#FFF;background:' + item.color + '">' + item.name.split(' ').join('<br />') + '</div>');
                });
            });

            //统计计算
            $(finalData.reverse()).each(function (i, item) {
                let gid = item.team.substring(0, 1) + "0";
                let group = groups.find((g) => g.id == gid);
                let targetTeam = group.teams.find((t) => t.id == item.team);
                let originalTeam = group.teams.find((t) => t.id == item.original);
                addVote(targetTeam, originalTeam, item._5th.vote, item._5th.rank);

                if (item._5th.rank <= 33)
                    $("#vote-table-1").append('<tr><td>' + item._5th.rank + '</td><td style="color:' + targetTeam.color + '">' + targetTeam.name + '</td><td style="color:' + originalTeam.color + '">' + originalTeam.name + '</td><td>' + item.name + '</td><td style="color:' + (item._5th.vote < item._4th.vote ? "green" : "red") + '">' + item._5th.vote + '</td><tr>')
                else
                    $("#vote-table-2").append('<tr><td>' + item._5th.rank + '</td><td style="color:' + targetTeam.color + '">' + targetTeam.name + '</td><td style="color:' + originalTeam.color + '">' + originalTeam.name + '</td><td>' + item.name + '</td><td style="color:' + (item._5th.vote < item._4th.vote ? "green" : "red") + '">' + item._5th.vote + '</td><tr>')

                if (item._5th.rank < 17) {
                    series_top16_rank.push({
                        color: getTeamColorByTeamId(item.team),
                        name: item.name,
                        data: [item._1st.rank, item._2nd.rank, item._3rd.rank, item._4th.rank, item._5th.rank]
                    });
                    categories_top16.push(item.name);
                    series_top16_123[0].data.push(Math.round(item._5th.vote * 100 - item._5th.z * 100) / 100);
                    series_top16_123[1].data.push(Math.round(item._5th.z * 100 - item._5th.s * 100) / 100);
                    series_top16_123[2].data.push(item._5th.s);
                    series_top16_increase[0].data.push(item._4th.vote);
                    //series_top16_increase[1].data.push(Math.round(item._5th.vote * 100 - item._4th.vote * 100) / 100);
                    series_top16_increase[1].data.push(item._5th.vote);
                }
            });

            //统计完毕之后的数据处理
            $.each(groups, function (i, group) {
                if (group._in > 0) {
                    $.each(group.teams, function (j, team) {
                        if (team._in.sum > 0) {
                            series_all_in.push({
                                name: team.name,
                                data: [team._in.t16, team._in.t32, team._in.t48, team._in.t66, team._in.sum]
                            })
                            console.log(team.id)
                            console.log(getTeamColorByTeamId(team.id))
                            colors.push(getTeamColorByTeamId(team.id))
                            series_all_percenter.push([team.name, team.vote])
                            series_origin_percenter.push([team.name, team.originVote])
                        }
                    })
                }
            })
            colors2 = colors.slice(0);
            XII_data = groups.find(g => g.id == "10").teams.find(f => f.id == "105");
            series_origin_percenter.splice(4, 0, [XII_data.name, XII_data.originVote]);
            colors2.splice(4, 0, XII_data.color)

        }
        $(document).ready(function () {
            //$.getJSON("http://query.yahooapis.com/v1/public/yql", {
            //    q: "select * from json where url='https://vote.48.cn/resource/json/vote_member.json'",
            //    format: "json"
            //}, function (data, code) {
            //    var $content = $("#content")
            //    if (data.query.results) {
            //        var result = JSON.stringify(data.query.results);
            //        memberResponse.rows = data.query.results.json.rows;
            //        main();
            //        initChart();
            //    } else {
            //        alert('no such code: ' + code);
            //    }
            //});
            main();
            initChart();
        })

        function removeEmptyItem(arr) {
            for (var i = 8; i >= 0; i--) {
                if (arr[i][1] === 0) {
                    arr.splice(i, 1);
                }
            }
        }

        function initChart() {
            series_top16_rank.reverse();
            series_top16_123[0].data.reverse();
            series_top16_123[1].data.reverse();
            series_top16_123[2].data.reverse();
            $('#chart-top16-123').highcharts({
                credits: { enabled: false },
                colors: ["#F49600", "#AE86BB", "#91CCEA"],
                chart: {
                    type: 'bar'
                },
                title: {
                    text: 'Top16速报中报终报票数分布图'
                },
                xAxis: {
                    categories: categories_top16.reverse()
                },
                yAxis: {
                    min: 0,
                    max: 410000,
                    title: {
                        text: ' '
                    }
                },
                legend: {
                    backgroundColor: '#FFFFFF',
                    reversed: true
                },
                tooltip: {
                    tooltip: {
                        headerFormat: '<b>{point.key}</b>',
                        pointFormat: '{series.name}: {point.y}',
                        valueDecimals: 1
                    },
                },
                plotOptions: {
                    series: {
                        stacking: 'normal'
                    }, dataLabels: {
                        enabled: true,
                        format: '{y :.1f}'
                    }
                },
                series: series_top16_123
            });
            series_top16_increase[0].data.reverse();
            series_top16_increase[1].data.reverse();
            $('#chart-top16-increase').highcharts({
                credits: { enabled: false },
                //colors: ["#94D401", "#EF1B52"],
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Top16票数增长量图'
                },
                xAxis: {
                    categories: categories_top16
                },
                yAxis: {
                    min: 0,
                    max: 410000,
                    title: {
                        show: false,
                        text: ' '
                    }
                },
                legend: {
                    backgroundColor: '#FFFFFF'
                },
                tooltip: {
                    headerFormat: '<b>{point.key}</b><br/>',
                    pointFormat: '{series.name}: {point.y:.2f}<br/>',
                    valueDecimals: 2,
                    shared: true,
                },
                plotOptions: {
                    //series: {
                    //    stacking: 'normal'
                    //},
                    column: {
                        borderWidth: 1,
                        grouping: false,
                        shadow: false
                    },
                    dataLabels: {
                        enabled: true,
                        format: '{y :.1f}'
                    }
                },
                series: series_top16_increase
            });
            $('#chart-history').highcharts({
                credits: { enabled: false },
                chart: {
                    type: 'line'
                },
                title: {
                    text: '各届总选总票数'
                },
                xAxis: {
                    categories: ['一选', '二选', '三选', '四选', '五选']
                },
                yAxis: {
                    title: {
                        enabled: false
                    }
                },
                plotOptions: {
                    line: {
                        dataLabels: {
                            enabled: true,          // 开启数据标签
                            format: '{y:.1f}'
                        },
                        enableMouseTracking: false // 关闭鼠标跟踪，对应的提示框、点击事件会失效
                    }
                },
                legend: { enabled: false },
                series: [{
                    data: [134816, 696584.7, 1758676.6, 2770146.8, sumvote]
                }]
            });

            $('#chart-top16-rank').highcharts({
                credits: { enabled: false },
                chart: { type: 'line' },
                title: { text: '第五届的Top16成员-名次变化' },
                xAxis: {
                    categories: ['第一届', '第二届', '第三届', '第四届', '第五届']
                },
                yAxis: {
                    allowDecimals: false,
                    title: { text: '' },
                    min: 1, max: 48, reversed: true
                },
                tooltip: {
                    formatter: function () {
                        return '<b>' + this.series.name + '</b><br/>' + this.x + ': ' + this.y;
                    }
                },
                legend: { layout: 'vertical', align: 'right', verticalAlign: 'middle', borderWidth: 0 },
                series: series_top16_rank
            });

            $('#chart-all-in').highcharts({
                credits: { enabled: false },
                colors: colors,
                chart: { type: 'column' },
                title: { text: '各组人数' },
                xAxis: {
                    categories: ['1-16', '17-32', '33-48', '49-66', '圈内']
                },
                yAxis: { min: 0, title: { text: '' } },
                tooltip: {
                    headerFormat: '<span style="font-size:1em;font-weight:bolder;">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' + '<td style="padding:0"><b>{point.y}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2, borderWidth: 0,
                        dataLabels: {
                            enabled: true,
                            color: "#000000",
                            style: { fontWeight: 'bold' },
                            formatter: function () { return this.y === 0 ? "" : this.y }
                        }
                    }
                },
                series: series_all_in
            });
            $('#chart-all-percenter').highcharts({
                credits: { enabled: false },
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: '各队票数总和比例'
                },
                colors: colors,
                tooltip: {
                    headerFormat: "<b>{point.key}</b><br/>",
                    pointFormat: '{series.name}：<b>{point.percentage:.1f}%</b><br />票数合计：<b>{point.y:.1f}</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: { enabled: true, inside: true, color: '#000000', connectorColor: 'transparent', format: '<b>{point.name}</b>: {point.percentage:.1f} %' },
                        showInLegend: true
                    }
                },
                series:
                [
                    {
                        type: 'pie',
                        name: '票数占比',
                        data: series_all_percenter
                    }
                ]
            });
            $('#chart-origin-percenter').highcharts({
                credits: { enabled: false },
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: null,
                    plotShadow: false
                },
                title: {
                    text: '大重组前分队情况下的各队票数总和比例'
                },
                colors: colors2,
                tooltip: {
                    headerFormat: "<b>{point.key}</b><br/>",
                    pointFormat: '{series.name}：<b>{point.percentage:.1f}%</b><br />票数合计：<b>{point.y:.1f}</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: { enabled: true, inside: true, color: '#000000', connectorColor: 'transparent', format: '<b>{point.name}</b>: {point.percentage:.1f} %' },
                        showInLegend: true
                    }
                },
                series:
                [
                    {
                        type: 'pie',
                        name: '票数占比',
                        data: series_origin_percenter
                    }
                ]
            });
        }
    </script>
</body>
</html>
