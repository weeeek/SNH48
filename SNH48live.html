<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>前端播放m3u8格式视频</title>
    <link href="https://vjs.zencdn.net/7.4.1/video-js.css" rel="stylesheet">
    <script src='https://vjs.zencdn.net/7.4.1/video.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js" type="text/javascript"></script>
    <!-- videojs-contrib-hls 用于在电脑端播放 如果只需手机播放可以不引入 -->
</head>
<body>
    <style>
        .video-js .vjs-tech {position: relative !important;}
    </style>
    <div>
        <video width="1366" height="768"  tabindex="-1" class="vjs-tech" id="myVideo" controls preload="auto" data-setup='{}' src="http://yy.migu.gslb.cmvideo.cn/wd_ls/fbh/fbha/1200/2018/index.m3u8?msisdn=40126711981510613184481181451311&amp;sid=5500105831&amp;spid=600226&amp;timestamp=20190727164437&amp;Channel_ID=0119_04102000-99000-200900260000000&amp;ProgramID=621796165&amp;encrypt=40923ca3324d8565d87d161344dcda84" poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFAQMAAAC3obSmAAAAA1BMVEUAAACnej3aAAAACklEQVQI12OAAwAACgABaQY5MgAAAABJRU5ErkJggg==" playsinline="playsinline" webkit-playsinline="true" x5-playsinline="true"></video>
    </div>
    <div class="qiehuan" style="width:100px;height: 100px;background: red;margin:0 auto;line-height: 100px;color:#fff;text-align: center">切换视频</div>
</body>
 
<script>
    // videojs 简单使用
    var myVideo = videojs('myVideo', {
        bigPlayButton: true,
        textTrackDisplay: false,
        posterImage: false,
        errorDisplay: false,
    })
    myVideo.play()
    var changeVideo = function (vdoSrc) {
        if (/\.m3u8$/.test(vdoSrc)) { //判断视频源是否是m3u8的格式
            myVideo.src({
                src: vdoSrc,
                type: 'application/x-mpegURL' //在重新添加视频源的时候需要给新的type的值
            })
        } else {
            myVideo.src(vdoSrc)
        }
        myVideo.load();
        myVideo.play();
    }
    var src = 'http://yy.migu.gslb.cmvideo.cn/wd_ls/fbh/fbha/1200/2018/index.m3u8?msisdn=40119121233815315148411151591113&sid=5500105831&spid=600226&timestamp=20190727163929&Channel_ID=0119_04102000-99000-200900260000000&ProgramID=621796165&encrypt=4b6eb548fa82b8bb92f6133c015d2bcc';
    document.querySelector('.qiehuan').addEventListener('click', function () {
        changeVideo(src);
    })
</script>